
(in-package :cl-synthesizer-note)

#|
;; http://subsynth.sourceforge.net/midinote2freq.html
(defun note-frequency-table ()
  (let ((arr (make-array 128)) (a 440))
    (dotimes (x 128)
      (let ((frequency
	     (* (/ a 32) (expt 2 (/ (+ x -9) 12)))))
	(setf (aref arr x) frequency)))
    arr))

(defun frequency-cv-table (frequency-table)
  (let* ((arr (make-array 128))
	 (converter (cl-synthesizer-core:linear-converter :input-min 0 :input-max 5.0 :output-min 0 :output-max 13000))
	 (fn (getf converter :output-to-input)))
    (dotimes (x 128)
      (setf (aref arr x) (funcall fn (elt frequency-table x))))
    arr))
|#


(defparameter *NOTE-TABLE*
  ;; http://www.electronics.dit.ie/staff/tscarff/Music_technology/midi/midi_note_numbers_for_octaves.htm
  '(
    (:C0 0)
    (:Csharp0 1)
    (:Dflat0 1)
    (:D0 2)
    (:Dsharp0 3)
    (:Eflat0 3)
    (:E0 4)
    (:F0 5)
    (:Fsharp0 6)
    (:Gflat0 6)
    (:G0 7)
    (:Gsharp0 8)
    (:Aflat0 8)
    (:A0 9)
    (:Asharp0 10)
    (:Bflat0 10)
    (:B0 11)

    (:C1 12)
    (:Csharp1 13)
    (:Dflat1 13)
    (:D1 14)
    (:Dsharp1 15)
    (:Eflat1 15)
    (:E1 16)
    (:F1 17)
    (:Fsharp1 18)
    (:Gflat1 18)
    (:G1 19)
    (:Gsharp1 20)
    (:Aflat1 20)
    (:A1 21)
    (:Asharp1 22)
    (:Bflat1 22)
    (:B1 23)

    (:C2 24)
    (:Csharp2 25)
    (:Dflat2 25)
    (:D2 26)
    (:Dsharp2 27)
    (:Eflat2 27)
    (:E2 28)
    (:F2 28)
    (:Fsharp2 29)
    (:Gflat2 29)
    (:G2 30)
    (:Gsharp2 31)
    (:Aflat2 31)
    (:A2 32)
    (:Asharp2 33)
    (:Bflat2 33)
    (:B2 35)

    (:C3 36)
    (:Csharp3 37)
    (:Dflat3 37)
    (:D3 38)
    (:Dsharp3 39)
    (:Eflat3 39)
    (:E3 40)
    (:F3 41)
    (:Fsharp3 42)
    (:Gflat3 42)
    (:G3 43)
    (:Gsharp3 44)
    (:Aflat3 44)
    (:A3 45)
    (:Asharp3 46)
    (:Bflat3 46)
    (:B3 47)

    (:C4 48)
    (:Csharp4 49)
    (:Dflat4 49)
    (:D4 50)
    (:Dsharp4 51)
    (:Eflat4 51)
    (:E4 52)
    (:F4 53)
    (:Fsharp4 54)
    (:Gflat4 54)
    (:G4 55)
    (:Gsharp4 56)
    (:Aflat4 56)
    (:A4 57)
    (:Asharp4 58)
    (:Bflat4 58)
    (:B4 59)
    
    (:C5 60)
    (:Csharp5 61)
    (:Dflat5 61)
    (:D5 62)
    (:Dsharp5 63)
    (:Eflat5 63)
    (:E5 64)
    (:F5 65)
    (:Fsharp5 66)
    (:Gflat5 66)
    (:G5 67)
    (:Gsharp5 68)
    (:Aflat5 68)
    (:A5 69)
    (:Asharp5 70)
    (:Bflat5 70)
    (:B5 71)

    (:C6 72)
    (:Csharp6 73)
    (:Dflat6 73)
    (:D6 74)
    (:Dsharp6 75)
    (:Eflat6 75)
    (:E6 76)
    (:F6 77)
    (:Fsharp6 78)
    (:Gflat6 78)
    (:G6 79)
    (:Gsharp6 80)
    (:Aflat6 80)
    (:A6 81)
    (:Asharp6 82)
    (:Bflat6 82)
    (:B6 83)

    (:C7 84)
    (:Csharp7 85)
    (:Dflat7 85)
    (:D7 86)
    (:Dsharp7 87)
    (:Eflat7 87)
    (:E7 88)
    (:F7 89)
    (:Fsharp7 90)
    (:Gflat7 90)
    (:G7 91)
    (:Gsharp7 92)
    (:Aflat7 92)
    (:A7 93)
    (:Asharp7 94)
    (:Bflat7 94)
    (:B7 95)

    (:C8 96)
    (:Csharp8 97)
    (:Dflat8 97)
    (:D8 98)
    (:Dsharp8 99)
    (:Eflat8 99)
    (:E8 100)
    (:F8 101)
    (:Fsharp8 102)
    (:Gflat8 102)
    (:G8 103)
    (:Gsharp8 104)
    (:Aflat8 104)
    (:A8 105)
    (:Asharp8 106)
    (:Bflat8 106)
    (:B8 107)

    (:C9 108)
    (:Csharp9 109)
    (:Dflat9 109)
    (:D9 110)
    (:Dsharp9 111)
    (:Eflat9 111)
    (:E9 112)
    (:F9 113)
    (:Fsharp9 114)
    (:Gflat9 114)
    (:G9 115)
    (:Gsharp9 116)
    (:Aflat9 116)
    (:A9 117)
    (:Asharp9 118)
    (:Bflat9 118)
    (:B9 119)

    (:C10 120)
    (:Csharp10 121)
    (:Dflat10 121)
    (:D10 122)
    (:Dsharp10 123)
    (:Eflat10 123)
    (:E10 124)
    (:F10 125)
    (:Fsharp10 126)
    (:Gflat10 126)
    (:G10 127)
    (:Gsharp10 128)
    (:Aflat10 128)
    (:A10 129)
    (:Asharp10 130)
    (:Bflat10 130)
    (:B10 131) ))
